<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>VÃ²ng quay may máº¯n</title>
<style>
  body{
    margin:0;
    font-family: Arial, Helvetica, sans-serif;
    background:#f5f5f5;
    text-align:center;
  }
  h2{margin:10px 0}
  .top{
    background:#111;
    color:#0f0;
    padding:10px;
    border-radius:10px;
    margin:10px;
    font-weight:bold;
  }
  canvas{margin-top:10px}
  button{
    margin-top:15px;
    padding:12px 30px;
    font-size:18px;
    border:none;
    border-radius:10px;
    background:#ee4d2d;
    color:#fff;
    font-weight:bold;
  }
  button:disabled{
    background:#999;
  }
  .result{
    margin-top:10px;
    font-size:18px;
    font-weight:bold;
  }
</style>
</head>
<body>

<h2>VÃ²ng quay may máº¯n</h2>

<div class="top">
  ðŸŽ« LÆ°á»£t cÃ²n láº¡i: <span id="turns">5</span>
</div>

<canvas id="wheel" width="300" height="300"></canvas>

<br>
<button id="spinBtn" onclick="spin()">ðŸŽ¯ QUAY NGAY</button>
<div class="result" id="result"></div>

<script>
const prizes = [
  "ðŸŽ 3 giá» quÃ  Táº¿t",
  "ðŸŽ 3 giá» quÃ  Táº¿t",
  "+50.000Ä‘",
  "+100.000Ä‘",
  "+200.000Ä‘",
  "+300.000Ä‘",
  "+500.000Ä‘",
  "-70.000Ä‘",
  "-80.000Ä‘",
  "-90.000Ä‘",
  "-200.000Ä‘",
  "Máº¥t lÆ°á»£t",
  "ThÃªm lÆ°á»£t",
  "ChÃºc may máº¯n"
];

const colors = [
  "#ffcc80","#ffcc80",
  "#66bb6a","#43a047","#26a69a","#ffd54f","#ffb300",
  "#ffa726","#fb8c00","#ef5350","#d32f2f",
  "#42a5f5","#ab47bc","#9e9e9e"
];

let turns = 5;
let spinning = false;
let angle = 0;

const canvas = document.getElementById("wheel");
const ctx = canvas.getContext("2d");
const center = canvas.width / 2;
const radius = center - 5;
const step = 2 * Math.PI / prizes.length;

function drawWheel(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  prizes.forEach((text,i)=>{
    const start = angle + i * step;
    ctx.beginPath();
    ctx.moveTo(center,center);
    ctx.arc(center,center,radius,start,start+step);
    ctx.fillStyle = colors[i % colors.length];
    ctx.fill();

    ctx.save();
    ctx.translate(center,center);
    ctx.rotate(start + step/2);
    ctx.textAlign="right";
    ctx.fillStyle="#000";
    ctx.font="14px Arial";
    ctx.fillText(text, radius-10,5);
    ctx.restore();
  });

  ctx.fillStyle="red";
  ctx.beginPath();
  ctx.moveTo(center-10,5);
  ctx.lineTo(center+10,5);
  ctx.lineTo(center,25);
  ctx.fill();
}

drawWheel();

function spin(){
  if(spinning || turns <= 0) return;

  turns--;
  document.getElementById("turns").innerText = turns;
  if(turns === 0){
    document.getElementById("spinBtn").disabled = true;
  }

  spinning = true;
  let speed = Math.random()*0.3 + 0.35;
  let decel = 0.995;

  function animate(){
    speed *= decel;
    angle += speed;
    drawWheel();

    if(speed < 0.002){
      spinning = false;
      const index = Math.floor(
        prizes.length - (angle % (2*Math.PI)) / step
      ) % prizes.length;

      document.getElementById("result").innerHTML =
        "ðŸŽ‰ Káº¿t quáº£: " + prizes[index];
      return;
    }
    requestAnimationFrame(animate);
  }
  animate();
}
</script>

</body>
</html>
